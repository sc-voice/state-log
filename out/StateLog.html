<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: StateLog</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: StateLog</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>StateLog<span class="signature">(interval, properties, date, state, history, hash, age)</span><span class="type-signature"></span></h2>
        
            <div class="class-description">Class for periodically logging state changes</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="StateLog"><span class="type-signature"></span>new StateLog<span class="signature">(interval, properties, date, state, history, hash, age)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Create a StateLog for a given interval.
Create a StateLog from its serialized JSON representation.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>interval</code></td>
            

            <td class="type">
            
                
<span class="param-type">milliseconds</span>


            
            </td>

            

            

            <td class="description last">REQUIRED: sampling period in millisecods (default 1000)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>properties</code></td>
            

            <td class="type">
            
                
<span class="param-type">StateLogProperties</span>


            
            </td>

            

            

            <td class="description last">see normalizeState()</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>date</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>


            
            </td>

            

            

            <td class="description last">JSON: current sample date</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">JSON</span>


            
            </td>

            

            

            <td class="description last">JSON: sample state</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>history</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last">JSON: past states</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hash</code></td>
            

            <td class="type">
            
                
<span class="param-type">guid</span>


            
            </td>

            

            

            <td class="description last">JSON: Merkle hash of state</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>age</code></td>
            

            <td class="type">
            
                
<span class="param-type">numberOfIntervals</span>


            
            </td>

            

            

            <td class="description last">JSON: state duration</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state-log.js.html">state-log.js</a>, <a href="state-log.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    
        <h3 class="subsection-title">Classes</h3>

        <dl>
            <dt><a href="StateLog.html">StateLog</a></dt>
            <dd></dd>
        </dl>
    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="stateAt"><span class="type-signature"></span>stateAt<span class="signature">(aDate)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Return state at given date
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>aDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state-log.js.html">state-log.js</a>, <a href="state-log.js.html#line150">line 150</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="stateHistory"><span class="type-signature"></span>stateHistory<span class="signature">(intervals, endDate)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns array of states corresponding to given time period
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>intervals</code></td>
            

            <td class="type">
            
                
<span class="param-type">int</span>


            
            </td>

            

            
                <td class="default">
                
                    1
                
                </td>
            

            <td class="description last">number of intervals in historical period</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>endDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">history end date</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state-log.js.html">state-log.js</a>, <a href="state-log.js.html#line167">line 167</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="update"><span class="type-signature"></span>update<span class="signature">(newState, newDate)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Update StateLog with new state for given date/time.
For proper synchronization, update the StateLog
at the interval defined for the StateLog.
The given date doesn't need to be exact,
but it should "reasonably close".
For historical accuracy, the given dates must not deviate
from ideal "no-lag" update intervals by less than
one interval.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>newState</code></td>
            

            <td class="type">
            
                
<span class="param-type">serializable</span>


            
            </td>

            

            

            <td class="description last">state at given date</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>


            
            </td>

            

            

            <td class="description last">date of given state</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state-log.js.html">state-log.js</a>, <a href="state-log.js.html#line117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".normalizeState"><span class="type-signature">(static) </span>normalizeState<span class="signature">(state, properties)</span><span class="type-signature"> &rarr; {serializable}</span></h4>
    

    



<div class="description">
    Normalize given state for storage.
Normalization can remove unwanted properties.
Normalization can also trim property values.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">serializable</span>


            
            </td>

            

            

            <td class="description last">raw state to be normalized</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>properties</code></td>
            

            <td class="type">
            
                
<span class="param-type">StateLogProperties</span>


            
            </td>

            

            

            <td class="description last">normalization parameters.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state-log.js.html">state-log.js</a>, <a href="state-log.js.html#line72">line 72</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    normalized object

If properties.xyz is true, that property is included.
If properties.xyz is a string, 
the string is converted to a regular expression and
the state value of that property is stripped of 
anything that does not matchthat regular expression.
If properties.xyz is anything else an Error is thrown.
If properties is null, the entire state is left as is.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">serializable</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Monitor.html">Monitor</a></li><li><a href="StateLog.html">StateLog</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Oct 20 2023 17:19:02 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>